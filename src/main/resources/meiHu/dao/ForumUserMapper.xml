<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="meiHu.dao.ForumUserMapper">
    <resultMap id="selectUserMap" type="ForumUser">
        <id column="uid" property="uid" />
        <result column="uname" property="uname" />
        <result column="password" property="password" />
        <result column="tel" property="tel" />
        <result column="email" property="email" />
        <result column="sex" property="sex" />
        <result column="point" property="point" />
        <result column="headpic" property="headpic" />
        <result column="registertime" property="registertime" />

        <association property="title" javaType="ForumTitle">
            <id column="titleid" property="titleid"/>
            <result column="title" property="title"/>
        </association>

    </resultMap>
    <!--public ForumUser selectUserByUid(int uid) ;-->
    <select id="selectUserByUid" resultMap="selectUserMap">
        SELECT u.uid,u.uname,u.password,u.tel,u.email,
                u.sex,u.point,u.headpic,u.registertime,t.* FROM forum_user u,forum_title t WHERE u.title_id = t.titleid and uid = #{_parameter}
    </select>

    <!--public ForumUser selectUsersByUname(String uname) ;-->
    <select id="selectUsersByUname" resultMap="selectUserMap" parameterType="String">
        SELECT u.*,t.* FROM forum_user u ,forum_title t WHERE u.uname=#{_parameter} and u.title_id=t.titleid
    </select>

    <!--public boolean insertUser(String uanme,String passwrod ,String tel) ;-->
    <insert id="insertUser" >
        INSERT INTO forum_user (uname,password,tel,title_id) VALUES (#{uname},#{password},#{tel},1)
    </insert>

    <!--public ForumUser selectUserByTel(String tel);-->
    <select id="selectUserByTel" parameterType="String" resultMap="selectUserMap">
        SELECT u.*,t.* FROM forum_user u ,forum_title t WHERE u.title_id = t.titleid AND u.tel=#{_parameter}
    </select>
</mapper>